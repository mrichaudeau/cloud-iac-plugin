# Module Call Template
# Generated by Cloud IaC Plugin
# Variables: {{module_name}}, {{module_source}}, {{module_version}}, {{inputs}}

# ==============================================================================
# {{module_name | uppercase}}
# ==============================================================================

module "{{module_name}}" {
  source  = "{{module_source}}"
{{#if module_version}}
  version = "{{module_version}}"
{{/if}}

  # Required inputs
{{#each required_inputs}}
  {{this.name}} = {{this.value}}
{{/each}}

  # Optional inputs
{{#each optional_inputs}}
  {{this.name}} = {{this.value}}
{{/each}}

  # Common inputs
  project     = var.project
  environment = var.environment
{{#if provider == "aws"}}
  region      = var.region
{{/if}}
{{#if provider == "azure"}}
  location    = local.location
  resource_group_name = local.resource_group_name
{{/if}}
{{#if provider == "gcp"}}
  project_id  = var.project_id
  region      = var.region
{{/if}}

  # Tags
  tags = local.common_tags

{{#if depends_on}}
  depends_on = [
{{#each depends_on}}
    module.{{this}},
{{/each}}
  ]
{{/if}}
}
