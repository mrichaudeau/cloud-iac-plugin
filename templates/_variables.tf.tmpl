# Variables Configuration Template
# Generated by Cloud IaC Plugin
# Variables: {{provider}}, {{environment}}, {{project}}

# ==============================================================================
# REQUIRED VARIABLES
# ==============================================================================

variable "project" {
  description = "Project name used for resource naming"
  type        = string

  validation {
    condition     = can(regex("^[a-z][a-z0-9-]{1,20}$", var.project))
    error_message = "Project name must be lowercase, start with a letter, and be 2-21 characters."
  }
}

variable "environment" {
  description = "Environment name (dev, staging, prod)"
  type        = string

  validation {
    condition     = contains(["dev", "staging", "prod"], var.environment)
    error_message = "Environment must be one of: dev, staging, prod."
  }
}

variable "region" {
  description = "Primary region for deployment"
  type        = string
}

# ==============================================================================
# TAGGING VARIABLES
# ==============================================================================

variable "owner" {
  description = "Owner of the resources (email or team name)"
  type        = string
}

variable "cost_center" {
  description = "Cost center for billing"
  type        = string
}

variable "additional_tags" {
  description = "Additional tags to apply to all resources"
  type        = map(string)
  default     = {}
}

# ==============================================================================
# PROVIDER-SPECIFIC VARIABLES
# ==============================================================================

{{#if provider == "aws"}}
variable "aws_account_id" {
  description = "AWS Account ID"
  type        = string
  default     = ""
}
{{/if}}

{{#if provider == "azure"}}
variable "subscription_id" {
  description = "Azure Subscription ID"
  type        = string
}

variable "tenant_id" {
  description = "Azure Tenant ID"
  type        = string
}

variable "location" {
  description = "Azure region (alias for region)"
  type        = string
  default     = ""
}
{{/if}}

{{#if provider == "gcp"}}
variable "project_id" {
  description = "GCP Project ID"
  type        = string
}

variable "zone" {
  description = "Default zone within the region"
  type        = string
  default     = ""
}
{{/if}}

# ==============================================================================
# NETWORKING VARIABLES
# ==============================================================================

variable "vpc_cidr" {
  description = "CIDR block for the VPC"
  type        = string
  default     = "10.0.0.0/16"

  validation {
    condition     = can(cidrhost(var.vpc_cidr, 0))
    error_message = "VPC CIDR must be a valid IPv4 CIDR block."
  }
}

variable "az_count" {
  description = "Number of availability zones to use"
  type        = number
  default     = 3

  validation {
    condition     = var.az_count >= 2 && var.az_count <= 6
    error_message = "AZ count must be between 2 and 6."
  }
}

# ==============================================================================
# SECURITY VARIABLES
# ==============================================================================

variable "allowed_cidr_blocks" {
  description = "CIDR blocks allowed for ingress (e.g., corporate VPN)"
  type        = list(string)
  default     = []
}

variable "enable_flow_logs" {
  description = "Enable VPC flow logs"
  type        = bool
  default     = true
}

# ==============================================================================
# GOVERNANCE VARIABLES
# ==============================================================================

variable "budget_monthly_limit" {
  description = "Monthly budget limit in USD"
  type        = number
  default     = 1000
}

variable "budget_alert_emails" {
  description = "Email addresses for budget alerts"
  type        = list(string)
  default     = []
}
